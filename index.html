<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Google Search MCP</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        h1, h2, h3 {
            color: #2c3e50;
        }
        pre {
            background-color: #f5f5f5;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
        }
        code {
            font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
        }
        .language-selector {
            position: fixed;
            top: 20px;
            right: 20px;
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 10px 15px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 16px;
            margin: 4px 2px;
            cursor: pointer;
            border-radius: 5px;
        }
        .content {
            display: none;
        }
        .content.active {
            display: block;
        }
    </style>
</head>
<body>
    <button class="language-selector" onclick="toggleLanguage()">English / 日本語</button>

    <!-- 日本語コンテンツ -->
    <div id="ja-content" class="content active">
        <h1>Simple Google Search MCP</h1>
        <p>Model Context Protocol (MCP)準拠のGoogle検索サービス<br>
        - Vibe Codingのお供にどうぞ！</p>

        <h2>機能</h2>
        <ul>
            <li>Google Custom Search APIを利用した検索機能</li>
            <li>ウェブページの内容解析・抽出機能</li>
            <li>複数ウェブページの一括解析機能</li>
            <li>高度な検索オプション対応：
                <ul>
                    <li>日付制限（date_restrict）</li>
                    <li>言語指定（language）</li>
                    <li>国・地域指定（country）</li>
                    <li>セーフサーチ（safe_search）</li>
                </ul>
            </li>
        </ul>

        <h2>セットアップ</h2>

        <h3>前提条件</h3>
        <ul>
            <li>Node.js 16以上</li>
            <li>Google Custom Search API キー</li>
            <li>Google Custom Search Engine ID</li>
        </ul>

        <h3>インストール</h3>
        <pre><code>npm install</code></pre>

        <h3>設定</h3>
        <p>以下の方法でGoogle APIキーを設定してください：</p>

        <h3>方法1：環境変数を使用</h3>
        <pre><code>export GOOGLE_API_KEY=YOUR_GOOGLE_API_KEY
export GOOGLE_SEARCH_ENGINE_ID=YOUR_SEARCH_ENGINE_ID</code></pre>

        <h3>ビルド</h3>
        <pre><code>npm run build</code></pre>

        <h3>サーバーの起動</h3>
        <pre><code>npm start</code></pre>

        <h2>Clineでの導入方法</h2>
        <p>Clineは、VS Code向けの自律型コーディングエージェントで、MCPサーバーとの統合をネイティブにサポートしています。Google Search MCPをClineで使用するには：</p>

        <h3>前提条件</h3>
        <ul>
            <li><a href="https://code.visualstudio.com/">VS Code</a>のインストール</li>
            <li><a href="https://marketplace.visualstudio.com/items?itemName=cline.cline">Cline拡張機能</a>のインストール</li>
            <li>Google APIキーとSearch Engine IDの取得（上記の「セットアップ」セクション参照）</li>
        </ul>

        <h3>手順</h3>
        <ol>
            <li>Google Search MCPサーバーをクローンして設定:
                <pre><code>git clone https://github.com/yourusername/google-search-mcp.git
cd google-search-mcp
npm install</code></pre>
            </li>
            <li>サーバーをビルドして起動:
                <pre><code>npm run build
npm start</code></pre>
            </li>
            <li>Clineでの設定:
                <ul>
                    <li>VS Codeを開き、Cline拡張機能が有効になっていることを確認</li>
                    <li><code>~/Documents/Cline/MCP</code> ディレクトリ（Windowsの場合は<code>%USERPROFILE%\Documents\Cline\MCP</code>）に以下のような設定ファイルを追加</li>
                </ul>
                <pre><code>{
  "google-search-mcp": {
    "autoApprove": [
      "google_search",
      "extract_webpage_content",
      "extract_multiple_webpages"
    ],
    "disabled": false,
    "timeout": 60,
    "command": "node",
    "args": [
      "実際のパス/google-search-mcp/dist/index.js"
    ],
    "env": {
      "GOOGLE_API_KEY": "YOUR_GOOGLE_API_KEY",
      "GOOGLE_SEARCH_ENGINE_ID": "YOUR_SEARCH_ENGINE_ID"
    },
    "transportType": "stdio"
  }
}</code></pre>
                <li>Clineチャットで <code>@GoogleSearch</code> または関連ツール名を使用して機能を呼び出し</li>
            </li>
        </ol>

        <h3>設定ファイルの説明</h3>
        <ul>
            <li><code>autoApprove</code>: 自動承認するツールのリスト</li>
            <li><code>disabled</code>: MCPサーバーを無効にするかどうか</li>
            <li><code>timeout</code>: タイムアウト時間（秒）</li>
            <li><code>command</code> と <code>args</code>: MCPサーバーを起動するコマンドと引数</li>
            <li><code>env</code>: 環境変数の設定</li>
            <li><code>transportType</code>: 通信方式（"stdio"または"sse"）</li>
        </ul>

        <h3>利用例</h3>
        <p>Clineチャットで以下のように使用できます:</p>
        <pre><code>@GoogleSearch React関連の最新ニュースを探して

@ExtractWebpage https://example.com/react-news からコンテンツを抽出</code></pre>
        <p>詳細な使用方法については、<a href="https://cline.bot">Cline公式ドキュメント</a>を参照してください。</p>

        <h2>使用方法</h2>
        <p>このMCPサーバーは、StandardIOを介してモデルと通信します。サポートされているツールは：</p>

        <h3>google_search</h3>
        <p>Google検索を実行し、結果を返します。</p>
        <p>引数:</p>
        <ul>
            <li><code>query</code> (必須): 検索クエリ</li>
            <li><code>num_results</code> (オプション): 返す結果の数（デフォルト: 5、最大: 10）</li>
            <li><code>date_restrict</code>: 特定の期間に絞り込み (例: 'd1'=過去1日, 'w2'=過去2週間, 'm3'=過去3ヶ月, 'y1'=過去1年)</li>
            <li><code>language</code>: 言語絞り込み - ISO 639-1コード (例: 'en'=英語, 'ja'=日本語)</li>
            <li><code>country</code>: 国・地域絞り込み - ISO 3166-1 alpha-2コード (例: 'us'=米国, 'jp'=日本)</li>
            <li><code>safe_search</code>: セーフサーチレベル ('off'=フィルタなし, 'medium'=中程度, 'high'=厳格)</li>
        </ul>

        <h3>extract_webpage_content</h3>
        <p>指定されたURLからウェブページのコンテンツを抽出し、読みやすいテキスト形式で返します。</p>
        <p>引数:</p>
        <ul>
            <li><code>url</code> (必須): コンテンツを抽出するウェブページのURL（<code>http://</code>または<code>https://</code>で始まる必要あり）</li>
        </ul>

        <h3>extract_multiple_webpages</h3>
        <p>複数のウェブページから一括でコンテンツを抽出します。</p>
        <p>引数:</p>
        <ul>
            <li><code>urls</code> (必須): コンテンツを抽出するウェブページのURLの配列（最大5つまで）</li>
        </ul>

        <h3>プログラムからの利用</h3>
        <pre><code>import { GoogleSearchService } from 'google-search-mcp';

const service = new GoogleSearchService();

// 基本的な検索
const results = await service.search('TypeScript programming');

// 結果数を指定
const limitedResults = await service.search('AI trends', 3);

// 高度な検索オプションの使用
const advancedResults = await service.search('programming', 5, {
  date_restrict: 'm3', // 過去3ヶ月以内
  language: 'ja',      // 日本語
  country: 'jp',       // 日本
  safe_search: 'high'  // 厳格なセーフサーチ
});

// ウェブページの内容抽出
const content = await service.extractWebpage('https://example.com');

// 複数ウェブページの一括抽出
const batchResults = await service.batchExtractWebpages([
  'https://example.com',
  'https://example.org'
]);</code></pre>

        <h2>テスト</h2>
        <p>テスト実行には以下のコマンドを使用します：</p>
        <pre><code>npm test</code></pre>
        <p>テストコードには以下の機能が含まれています：</p>
        <ul>
            <li>Google検索のテスト</li>
            <li>単一ウェブページからのコンテンツ抽出テスト</li>
            <li>複数ウェブページからのコンテンツ抽出テスト</li>
            <li>エラー処理テスト</li>
        </ul>

        <h2>カスタマイズ</h2>
        <p>より高度な機能を追加するには、サーバー実装を拡張してください。</p>

        <h2>注意事項</h2>
        <ul>
            <li>Google Custom Search APIには使用制限があります。詳細は<a href="https://developers.google.com/custom-search/v1/overview">Google Custom Search APIのドキュメント</a>を参照してください。</li>
            <li>一部の検索オプションはGoogle Custom Search APIのプランによって利用できない場合があります。</li>
        </ul>
    </div>

    <!-- 英語コンテンツ -->
    <div id="en-content" class="content">
        <h1>Simple Google Search MCP</h1>
        <p>A Google search service compliant with Model Context Protocol (MCP)<br>
        - Perfect companion for Vibe Coding!</p>

        <h2>Features</h2>
        <ul>
            <li>Search functionality using Google Custom Search API</li>
            <li>Web page content analysis and extraction</li>
            <li>Batch analysis of multiple web pages</li>
            <li>Advanced search options support:
                <ul>
                    <li>Date restriction (date_restrict)</li>
                    <li>Language specification (language)</li>
                    <li>Country/region specification (country)</li>
                    <li>SafeSearch (safe_search)</li>
                </ul>
            </li>
        </ul>

        <h2>Setup</h2>

        <h3>Prerequisites</h3>
        <ul>
            <li>Node.js 16 or higher</li>
            <li>Google Custom Search API key</li>
            <li>Google Custom Search Engine ID</li>
        </ul>

        <h3>Installation</h3>
        <pre><code>npm install</code></pre>

        <h3>Configuration</h3>
        <p>Set up your Google API key using one of the following methods:</p>

        <h3>Method 1: Using Environment Variables</h3>
        <pre><code>export GOOGLE_API_KEY=YOUR_GOOGLE_API_KEY
export GOOGLE_SEARCH_ENGINE_ID=YOUR_SEARCH_ENGINE_ID</code></pre>

        <h3>Build</h3>
        <pre><code>npm run build</code></pre>

        <h3>Starting the Server</h3>
        <pre><code>npm start</code></pre>

        <h2>Integration with Cline</h2>
        <p>Cline is an autonomous coding agent for VS Code that natively supports integration with MCP servers. To use Google Search MCP with Cline:</p>

        <h3>Prerequisites</h3>
        <ul>
            <li>Install <a href="https://code.visualstudio.com/">VS Code</a></li>
            <li>Install the <a href="https://marketplace.visualstudio.com/items?itemName=cline.cline">Cline extension</a></li>
            <li>Obtain Google API key and Search Engine ID (see "Setup" section above)</li>
        </ul>

        <h3>Steps</h3>
        <ol>
            <li>Clone and set up the Google Search MCP server:
                <pre><code>git clone https://github.com/yourusername/google-search-mcp.git
cd google-search-mcp
npm install</code></pre>
            </li>
            <li>Build and start the server:
                <pre><code>npm run build
npm start</code></pre>
            </li>
            <li>Configure Cline:
                <ul>
                    <li>Open VS Code and ensure the Cline extension is enabled</li>
                    <li>Add a configuration file to the <code>~/Documents/Cline/MCP</code> directory (or <code>%USERPROFILE%\Documents\Cline\MCP</code> on Windows) with the following content:</li>
                </ul>
                <pre><code>{
  "google-search-mcp": {
    "autoApprove": [
      "google_search",
      "extract_webpage_content",
      "extract_multiple_webpages"
    ],
    "disabled": false,
    "timeout": 60,
    "command": "node",
    "args": [
      "actual-path/google-search-mcp/dist/index.js"
    ],
    "env": {
      "GOOGLE_API_KEY": "YOUR_GOOGLE_API_KEY",
      "GOOGLE_SEARCH_ENGINE_ID": "YOUR_SEARCH_ENGINE_ID"
    },
    "transportType": "stdio"
  }
}</code></pre>
                <li>Use <code>@GoogleSearch</code> or related tool names in Cline chat to invoke the functionality</li>
            </li>
        </ol>

        <h3>Configuration File Explanation</h3>
        <ul>
            <li><code>autoApprove</code>: List of tools to automatically approve</li>
            <li><code>disabled</code>: Whether to disable the MCP server</li>
            <li><code>timeout</code>: Timeout duration (in seconds)</li>
            <li><code>command</code> and <code>args</code>: Command and arguments to start the MCP server</li>
            <li><code>env</code>: Environment variable settings</li>
            <li><code>transportType</code>: Communication method ("stdio" or "sse")</li>
        </ul>

        <h3>Usage Examples</h3>
        <p>You can use the following in Cline chat:</p>
        <pre><code>@GoogleSearch Find the latest news about React

@ExtractWebpage Extract content from https://example.com/react-news</code></pre>
        <p>For detailed usage instructions, refer to the <a href="https://cline.bot">Cline official documentation</a>.</p>

        <h2>Usage</h2>
        <p>This MCP server communicates with models via StandardIO. Supported tools include:</p>

        <h3>google_search</h3>
        <p>Performs a Google search and returns results.</p>
        <p>Arguments:</p>
        <ul>
            <li><code>query</code> (required): Search query</li>
            <li><code>num_results</code> (optional): Number of results to return (default: 5, max: 10)</li>
            <li><code>date_restrict</code>: Restrict to a specific time period (e.g., 'd1'=past day, 'w2'=past 2 weeks, 'm3'=past 3 months, 'y1'=past year)</li>
            <li><code>language</code>: Language restriction - ISO 639-1 codes (e.g., 'en'=English, 'ja'=Japanese)</li>
            <li><code>country</code>: Country/region restriction - ISO 3166-1 alpha-2 codes (e.g., 'us'=United States, 'jp'=Japan)</li>
            <li><code>safe_search</code>: SafeSearch level ('off'=no filtering, 'medium'=moderate, 'high'=strict)</li>
        </ul>

        <h3>extract_webpage_content</h3>
        <p>Extracts content from a specified URL and returns it in readable text format.</p>
        <p>Arguments:</p>
        <ul>
            <li><code>url</code> (required): URL of the web page to extract content from (must start with <code>http://</code> or <code>https://</code>)</li>
        </ul>

        <h3>extract_multiple_webpages</h3>
        <p>Extracts content from multiple web pages in batch.</p>
        <p>Arguments:</p>
        <ul>
            <li><code>urls</code> (required): Array of web page URLs to extract content from (maximum 5)</li>
        </ul>

        <h3>Programmatic Usage</h3>
        <pre><code>import { GoogleSearchService } from 'google-search-mcp';

const service = new GoogleSearchService();

// Basic search
const results = await service.search('TypeScript programming');

// Specify number of results
const limitedResults = await service.search('AI trends', 3);

// Using advanced search options
const advancedResults = await service.search('programming', 5, {
  date_restrict: 'm3', // Within the past 3 months
  language: 'en',      // English
  country: 'us',       // United States
  safe_search: 'high'  // Strict SafeSearch
});

// Extract web page content
const content = await service.extractWebpage('https://example.com');

// Batch extract from multiple web pages
const batchResults = await service.batchExtractWebpages([
  'https://example.com',
  'https://example.org'
]);</code></pre>

        <h2>Testing</h2>
        <p>Run tests using the following command:</p>
        <pre><code>npm test</code></pre>
        <p>Test code includes the following functionality:</p>
        <ul>
            <li>Google search tests</li>
            <li>Single web page content extraction tests</li>
            <li>Multiple web page content extraction tests</li>
            <li>Error handling tests</li>
        </ul>

        <h2>Customization</h2>
        <p>To add more advanced features, extend the server implementation.</p>

        <h2>Notes</h2>
        <ul>
            <li>Google Custom Search API has usage limits. For details, refer to the <a href="https://developers.google.com/custom-search/v1/overview">Google Custom Search API documentation</a>.</li>
            <li>Some search options may not be available depending on your Google Custom Search API plan.</li>
        </ul>
    </div>

    <script>
        // 言語切り替え機能
        function toggleLanguage() {
            const jaContent = document.getElementById('ja-content');
            const enContent = document.getElementById('en-content');
            
            if (jaContent.classList.contains('active')) {
                jaContent.classList.remove('active');
                enContent.classList.add('active');
                document.documentElement.lang = 'en';
            } else {
                enContent.classList.remove('active');
                jaContent.classList.add('active');
                document.documentElement.lang = 'ja';
            }
        }
    </script>
</body>
</html>
